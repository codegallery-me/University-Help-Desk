<!DOCTYPE html>
<html lang="en">
<head>
    <title>Forgot Password - UniSupport</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="d-flex align-items-center justify-content-center min-vh-100 bg-light">
    <div class="card p-4 shadow-sm" style="max-width: 400px; width: 100%;">
        <h3 class="fw-bold text-center mb-3">Forgot Password</h3>
        <p class="text-muted text-center small">Enter your email and we'll send you a reset link.</p>
        
        <form id="forgotForm">
            <div class="mb-3">
                <input type="email" id="email" class="form-control" placeholder="Enter your email" required>
            </div>
            <button type="submit" class="btn btn-primary w-100">Send Reset Link</button>
        </form>
        
        <div id="msg" class="alert mt-3 d-none text-center"></div>
        <div class="text-center mt-3">
            <a href="login.html" class="text-decoration-none">Back to Login</a>
        </div>
    </div>

    <script>
        document.getElementById("forgotForm").addEventListener("submit", async (e) => {
            e.preventDefault();
            const email = document.getElementById("email").value;
            const msg = document.getElementById("msg");
            const btn = e.target.querySelector("button");

            btn.disabled = true;
            btn.textContent = "Sending...";

            try {
                const res = await fetch("http://localhost:8000/auth/forgot-password", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ email })
                });
                
                // Always show success message for security
                msg.className = "alert mt-3 alert-success";
                msg.textContent = "If an account exists, an email has been sent.";
                msg.classList.remove("d-none");
            } catch (err) {
                msg.className = "alert mt-3 alert-danger";
                msg.textContent = "Error sending email.";
                msg.classList.remove("d-none");
            } finally {
                btn.disabled = false;
                btn.textContent = "Send Reset Link";
            }
        });
    </script>
</body>
</html>